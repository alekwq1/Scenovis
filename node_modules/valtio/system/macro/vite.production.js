System.register(["@babel/helper-module-imports","@babel/types","aslemammad-vite-plugin-macro","babel-plugin-macros"],function(n){"use strict";var c,o,l,d,s,u;return{setters:[function(e){c=e.addNamed},function(e){o=e},function(e){l=e.defineMacro,d=e.createMacroPlugin,s=e.defineMacroProvider},function(e){u=e.MacroError}],execute:function(){n("provideValtioMacro",v);const e=n("valtioMacro",l("useProxy").withSignature("<T extends object>(proxyObject: T): void").withHandler(h=>{var m,f,p,b;const{path:r,args:g}=h,P=c(r,"useSnapshot","valtio"),a=(m=g[0])==null?void 0:m.node;if(!o.isIdentifier(a))throw new u("no proxy object");const M=o.identifier(`valtio_macro_snap_${a.name}`);(f=r.parentPath)==null||f.replaceWith(o.variableDeclaration("const",[o.variableDeclarator(M,o.callExpression(P,[a]))]));let t=0;(b=(p=r.parentPath)==null?void 0:p.getFunctionParent())==null||b.traverse({Identifier(i){t===0&&i.node!==a&&i.node.name===a.name&&(i.node.name=M.name)},Function:{enter(){++t},exit(){--t}}})}));function v(){return s({id:"valtio/macro",exports:{"valtio/macro":{macros:[e]}}})}const x=n("default",d({}).use(v()))}}});
