System.register(["react","proxy-compare","use-sync-external-store/shim","valtio/vanilla"],function(i){"use strict";var c,f,a,p,h,l,S,g,y,u;return{setters:[function(e){c=e.useRef,f=e.useCallback,a=e.useMemo,p=e.useEffect},function(e){h=e.isChanged,l=e.createProxy},function(e){S=e.useSyncExternalStore},function(e){g=e.subscribe,y=e.snapshot,u=e.getVersion,i({getVersion:e.getVersion,proxy:e.proxy,ref:e.ref,snapshot:e.snapshot,subscribe:e.subscribe,unstable_getHandler:e.getHandler})}],execute:function(){i("useSnapshot",e);function e(s,b){const v=new WeakMap,o=c(),t=c(),k=b==null?void 0:b.sync,C=S(f(n=>{t.current=n;const r=g(s,n,k);return()=>{r(),t.current=void 0}},[s,k]),a(()=>{let n;return()=>{const r=y(s);try{if(n&&o.current&&!h(n,r,o.current,new WeakMap))return n}catch{}return n=r}},[s])),E=u(s);p(()=>{o.current=v,E!==u(s)&&(t.current?t.current():typeof process=="object"&&process.env.NODE_ENV!=="production"&&console.warn("[Bug] last callback is undefined"))});const V=a(()=>new WeakMap,[]);return l(C,v,V)}}}});
